<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artsy - Insights</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://kingdomclad-art.github.io/atsy-seller/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <nav class="nav">
        <div class="nav-container">
            <a href="index.html" class="logo">Artsy</a>
            <div class="mobile-menu-btn" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="index.html">Dashboard</a>
                <a href="upload.html">Upload</a>
                <a href="orders.html">Orders</a>
                <a href="messages.html">Messages</a>
                <a href="insights.html" class="active">Insights</a>
                <div class="profile-icon">A</div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="insights-header">
            <h1>Insights & Growth</h1>
            <div class="time-range-selector">
                <button class="time-range-btn active" onclick="changeTimeRange('week')">Week</button>
                <button class="time-range-btn" onclick="changeTimeRange('month')">Month</button>
                <button class="time-range-btn" onclick="changeTimeRange('year')">Year</button>
            </div>
        </div>

        <!-- Key Metrics -->
        <div class="metrics-grid">
            <div class="insight-card">
                <div class="insight-title">Total Revenue</div>
                <div class="insight-value" id="totalRevenue">$12,450</div>
                <div class="insight-trend" id="revenueTrend">â†‘ 18% vs last month</div>
            </div>
            <div class="insight-card">
                <div class="insight-title">Orders</div>
                <div class="insight-value" id="totalOrders">156</div>
                <div class="insight-trend" id="ordersTrend">â†‘ 12% vs last month</div>
            </div>
            <div class="insight-card">
                <div class="insight-title">Conversion Rate</div>
                <div class="insight-value" id="conversionRate">3.4%</div>
                <div class="insight-trend" id="conversionTrend">â†‘ 0.8% vs last month</div>
            </div>
            <div class="insight-card">
                <div class="insight-title">Avg. Order Value</div>
                <div class="insight-value" id="avgOrderValue">$79.80</div>
                <div class="insight-trend" id="avgTrend">â†‘ 5% vs last month</div>
            </div>
        </div>

        <!-- Sales Chart -->
        <div class="chart-container">
            <canvas id="salesChart"></canvas>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
            <!-- Category Breakdown -->
            <div class="card">
                <h3 style="margin-bottom: 20px;">Sales by Category</h3>
                <canvas id="categoryChart" style="height: 200px;"></canvas>
                <div style="margin-top: 20px;" id="categoryBreakdown">
                    <!-- Filled by JavaScript -->
                </div>
            </div>

            <!-- Regional Demand -->
            <div class="card">
                <h3 style="margin-bottom: 20px;">Regional Demand</h3>
                <div id="regionalDemand">
                    <!-- Filled by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Best Sellers & Trending -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="card">
                <h3 style="margin-bottom: 20px;">Best Selling Products</h3>
                <ul class="best-sellers-list" id="bestSellers">
                    <!-- Filled by JavaScript -->
                </ul>
            </div>

            <div class="card">
                <h3 style="margin-bottom: 20px;">ðŸ”¥ Trending in Your Category</h3>
                <div id="trendingItems">
                    <!-- Filled by JavaScript -->
                </div>
                <div style="margin-top: 20px; padding: 15px; background: var(--gray-100); border-radius: 8px;" id="priceTip">
                    <!-- Filled by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        let salesChart;
        let categoryChart;

        function toggleMenu() {
            document.getElementById('navLinks').classList.toggle('active');
        }

        // Initialize charts when page loads
        window.onload = function() {
            createCharts();
            updateMetrics('year'); // Default view
        };

        function createCharts() {
            // Sales Chart
            const ctx = document.getElementById('salesChart').getContext('2d');
            salesChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb'],
                    datasets: [{
                        label: 'Sales ($)',
                        data: [1300, 1800, 1900, 2000, 2100, 2200],
                        borderColor: '#FF6B35',
                        backgroundColor: 'rgba(255, 107, 53, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.05)'
                            }
                        }
                    }
                }
            });

            // Category Chart
            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            categoryChart = new Chart(categoryCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Basketry', 'Textiles', 'Ceramics', 'Beadwork'],
                    datasets: [{
                        data: [45, 30, 15, 10],
                        backgroundColor: [
                            '#FF6B35',
                            '#FF8C5A',
                            '#FFA07A',
                            '#FFB599'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    cutout: '70%'
                }
            });
        }

        function changeTimeRange(range) {
            // Update active button
            document.querySelectorAll('.time-range-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update charts and metrics based on range
            updateMetrics(range);
        }

        function updateMetrics(range) {
            // Different data for each time range
            const data = {
                week: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    sales: [320, 450, 380, 490, 520, 680, 710],
                    revenue: '$3,550',
                    revenueTrend: 'â†‘ 8% vs last week',
                    orders: '42',
                    ordersTrend: 'â†‘ 5% vs last week',
                    conversion: '3.8%',
                    conversionTrend: 'â†‘ 0.3% vs last week',
                    avgOrder: '$84.50',
                    avgTrend: 'â†‘ 3% vs last week'
                },
                month: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    sales: [1850, 2100, 1950, 2300],
                    revenue: '$8,200',
                    revenueTrend: 'â†‘ 15% vs last month',
                    orders: '98',
                    ordersTrend: 'â†‘ 10% vs last month',
                    conversion: '3.6%',
                    conversionTrend: 'â†‘ 0.5% vs last month',
                    avgOrder: '$83.70',
                    avgTrend: 'â†‘ 4% vs last month'
                },
                year: {
                    labels: ['Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb'],
                    sales: [1300, 1800, 1900, 2000, 2100, 2200],
                    revenue: '$12,450',
                    revenueTrend: 'â†‘ 18% vs last year',
                    orders: '156',
                    ordersTrend: 'â†‘ 12% vs last year',
                    conversion: '3.4%',
                    conversionTrend: 'â†‘ 0.8% vs last year',
                    avgOrder: '$79.80',
                    avgTrend: 'â†‘ 5% vs last year'
                }
            };

            const selected = data[range];

            // Update chart
            salesChart.data.labels = selected.labels;
            salesChart.data.datasets[0].data = selected.sales;
            salesChart.update();

            // Update metrics
            document.getElementById('totalRevenue').textContent = selected.revenue;
            document.getElementById('revenueTrend').textContent = selected.revenueTrend;
            document.getElementById('totalOrders').textContent = selected.orders;
            document.getElementById('ordersTrend').textContent = selected.ordersTrend;
            document.getElementById('conversionRate').textContent = selected.conversion;
            document.getElementById('conversionTrend').textContent = selected.conversionTrend;
            document.getElementById('avgOrderValue').textContent = selected.avgOrder;
            document.getElementById('avgTrend').textContent = selected.avgTrend;

            // Category breakdown (changes slightly by range)
            const categoryData = {
                week: { Basketry: 42, Textiles: 32, Ceramics: 14, Beadwork: 12 },
                month: { Basketry: 44, Textiles: 31, Ceramics: 14, Beadwork: 11 },
                year: { Basketry: 45, Textiles: 30, Ceramics: 15, Beadwork: 10 }
            };

            const cats = categoryData[range];
            document.getElementById('categoryBreakdown').innerHTML = `
                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                    <span>Basketry</span>
                    <span style="font-weight: 600;">${cats.Basketry}%</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                    <span>Textiles</span>
                    <span style="font-weight: 600;">${cats.Textiles}%</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                    <span>Ceramics</span>
                    <span style="font-weight: 600;">${cats.Ceramics}%</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                    <span>Beadwork</span>
                    <span style="font-weight: 600;">${cats.Beadwork}%</span>
                </div>
            `;

            categoryChart.data.datasets[0].data = [cats.Basketry, cats.Textiles, cats.Ceramics, cats.Beadwork];
            categoryChart.update();

            // Regional demand (static for demo)
            document.getElementById('regionalDemand').innerHTML = `
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>North America</span>
                        <span style="font-weight: 600;">$3,825</span>
                    </div>
                    <div style="height: 8px; background: var(--gray-200); border-radius: 4px;">
                        <div style="width: 45%; height: 100%; background: var(--primary); border-radius: 4px;"></div>
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>Europe</span>
                        <span style="font-weight: 600;">$3,510</span>
                    </div>
                    <div style="height: 8px; background: var(--gray-200); border-radius: 4px;">
                        <div style="width: 42%; height: 100%; background: var(--primary); border-radius: 4px;"></div>
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>Africa</span>
                        <span style="font-weight: 600;">$3,125</span>
                    </div>
                    <div style="height: 8px; background: var(--gray-200); border-radius: 4px;">
                        <div style="width: 38%; height: 100%; background: var(--primary); border-radius: 4px;"></div>
                    </div>
                </div>
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>Asia</span>
                        <span style="font-weight: 600;">$2,750</span>
                    </div>
                    <div style="height: 8px; background: var(--gray-200); border-radius: 4px;">
                        <div style="width: 33%; height: 100%; background: var(--primary); border-radius: 4px;"></div>
                    </div>
                </div>
            `;

            // Best sellers
            document.getElementById('bestSellers').innerHTML = `
                <li class="best-seller-item">
                    <span>Hand-woven Basket Set</span>
                    <span style="font-weight: 600;">$3,825</span>
                </li>
                <li class="best-seller-item">
                    <span>Traditional Beaded Necklace</span>
                    <span style="font-weight: 600;">$3,510</span>
                </li>
                <li class="best-seller-item">
                    <span>Handcrafted Ceramic Bowl</span>
                    <span style="font-weight: 600;">$3,125</span>
                </li>
                <li class="best-seller-item">
                    <span>Kente Cloth Textile</span>
                    <span style="font-weight: 600;">$2,890</span>
                </li>
            `;

            // Trending items (slightly different by range)
            const trends = {
                week: [
                    { item: 'Natural fiber baskets', increase: 32 },
                    { item: 'Kente patterns', increase: 28 },
                    { item: 'Beaded earrings', increase: 22 }
                ],
                month: [
                    { item: 'Kente Cloth patterns', increase: 45 },
                    { item: 'Natural fiber baskets', increase: 28 },
                    { item: 'Traditional beadwork', increase: 15 }
                ],
                year: [
                    { item: 'Kente Cloth patterns', increase: 45 },
                    { item: 'Natural fiber baskets', increase: 28 },
                    { item: 'Traditional beadwork', increase: 15 }
                ]
            };

            const currentTrends = trends[range];
            document.getElementById('trendingItems').innerHTML = currentTrends.map(t => `
                <div class="ai-suggestion" style="margin-bottom: 10px;">
                    <strong>${t.item}</strong>
                    <span style="color: var(--success); float: right;">+${t.increase}%</span>
                </div>
            `).join('');

            document.getElementById('priceTip').innerHTML = `
                <strong>ðŸ’° Price Optimization Tip</strong>
                <p style="font-size: 14px; margin-top: 8px;">Your beaded jewelry is priced 15% below market average. Consider a 10-15% increase to match similar artisan products.</p>
            `;
        }
    </script>
</body>
</html>