<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artsy - Upload Product</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://kingdomclad-art.github.io/atsy-seller/styles.css">
</head>
<body>
    <nav class="nav">
        <div class="nav-container">
            <a href="index.html" class="logo">Artsy</a>
            <div class="mobile-menu-btn" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="index.html">Dashboard</a>
                <a href="upload.html" class="active">Upload</a>
                <a href="orders.html">Orders</a>
                <a href="messages.html">Messages</a>
                <a href="insights.html">Insights</a>
                <div class="profile-icon">A</div>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1 style="margin-bottom: 10px;">Upload New Product</h1>
        <p style="color: var(--neutral); margin-bottom: 30px;">Share your craftsmanship with the world</p>

        <!-- Step Progress -->
        <div class="step-progress">
            <div class="step active" id="step1">
                <div class="step-number">1</div>
                <div class="step-label">Photos</div>
            </div>
            <div class="step" id="step2">
                <div class="step-number">2</div>
                <div class="step-label">Details</div>
            </div>
            <div class="step" id="step3">
                <div class="step-number">3</div>
                <div class="step-label">Pricing</div>
            </div>
            <div class="step" id="step4">
                <div class="step-number">4</div>
                <div class="step-label">Publish</div>
            </div>
        </div>

        <!-- Step 1: Photos -->
        <div class="card" id="step1-content">
            <h3 style="margin-bottom: 20px;">Product Photos</h3>
            
            <div class="upload-area" onclick="document.getElementById('fileInput').click()">
    <div style="font-size: 40px; margin-bottom: 10px;">üì∏</div>
    <p>Click to upload or drag and drop</p>
    <p style="font-size: 12px; color: var(--neutral); margin-top: 5px;">1200√ó1200px recommended ‚Ä¢ JPG or PNG</p>
    <input type="file" id="fileInput" accept="image/*" multiple style="display: none;" onchange="handleImageUpload(event)">
</div>

<div id="uploadStatus" style="margin-top: 15px; font-size: 14px; text-align: center;"></div>

            <div class="image-preview-grid" id="imagePreview"></div>

            <div class="ai-suggestion">
                <strong>‚ú® AI Enhancement Available</strong>
                <p style="margin-top: 5px;">Auto background cleanup and lighting improvement will be applied to your photos</p>
            </div>

            <div style="display: flex; justify-content: space-between; margin-top: 30px;">
                <button class="btn btn-outline" onclick="location.href='index.html'">Cancel</button>
                <button class="btn btn-primary" onclick="nextStep(2)">Next: Details ‚Üí</button>
            </div>
        </div>

        <!-- Step 2: Details (Hidden initially) -->
        <div class="card" id="step2-content" style="display: none;">
            <h3 style="margin-bottom: 20px;">Product Details</h3>

            <div class="form-group">
                <label class="form-label">Product Title</label>
                <input type="text" class="form-input" id="productTitle" placeholder="e.g., Hand-woven Basket Set">
                <div class="ai-suggestion" style="margin-top: 10px; padding: 10px;">
                    <strong>ü§ñ AI Suggestion:</strong> "Handwoven Basket Set - Natural Fibers, Traditional Technique"
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Category</label>
                <select class="form-select" id="productCategory">
                    <option>Select category</option>
                    <option>Basketry</option>
                    <option>Textiles</option>
                    <option>Ceramics</option>
                    <option>Beadwork</option>
                    <option>Wood Carving</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">Description</label>
                <textarea class="form-textarea" id="productDescription" placeholder="Tell the story behind your craft..."></textarea>
                <div class="ai-suggestion" style="margin-top: 10px; padding: 10px;">
                    <strong>ü§ñ AI Suggestion:</strong> Add cultural context and materials used
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Materials Used</label>
                <input type="text" class="form-input" placeholder="e.g., Natural palm fibers, local beads">
            </div>

            <div style="display: flex; justify-content: space-between; margin-top: 30px;">
                <button class="btn btn-outline" onclick="prevStep(1)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="nextStep(3)">Next: Pricing ‚Üí</button>
            </div>
        </div>

        <!-- Step 3: Pricing (Hidden initially) -->
        <div class="card" id="step3-content" style="display: none;">
            <h3 style="margin-bottom: 20px;">Pricing</h3>

            <div class="form-group">
                <label class="form-label">Price ($)</label>
                <input type="number" class="form-input" id="productPrice" placeholder="85">
            </div>

            <div class="ai-suggestion">
                <strong>ü§ñ AI Price Recommendation</strong>
                <p style="margin-top: 10px;">Similar products in this category sell for $75-95. Based on your craftsmanship level, we recommend $85-90.</p>
            </div>

            <div class="form-group">
                <label class="form-label">Quantity Available</label>
                <input type="number" class="form-input" value="10">
            </div>

            <div class="form-group">
                <label class="form-label">Processing Time</label>
                <select class="form-select">
                    <option>1-2 business days</option>
                    <option>3-5 business days</option>
                    <option>1-2 weeks</option>
                </select>
            </div>

            <div style="display: flex; justify-content: space-between; margin-top: 30px;">
                <button class="btn btn-outline" onclick="prevStep(2)">‚Üê Back</button>
                <button class="btn btn-primary" onclick="nextStep(4)">Preview ‚Üí</button>
            </div>
        </div>

        <!-- Step 4: Preview & Publish (Hidden initially) -->
        <div class="card" id="step4-content" style="display: none;">
            <h3 style="margin-bottom: 20px;">Preview Your Listing</h3>

            <div style="background: var(--gray-100); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                <div style="display: flex; gap: 20px;">
                    <img src="https://via.placeholder.com/150" alt="Preview" style="width: 150px; height: 150px; object-fit: cover; border-radius: 8px;">
                    <div>
                        <h4 id="previewTitle">Hand-woven Basket Set</h4>
                        <p style="color: var(--neutral);" id="previewCategory">Basketry</p>
                        <p style="font-size: 24px; color: var(--primary); font-weight: 600;" id="previewPrice">$85</p>
                    </div>
                </div>
                <p style="margin-top: 20px;" id="previewDescription">Beautiful natural fiber baskets woven by hand...</p>
            </div>

            <div style="display: flex; gap: 15px; justify-content: flex-end;">
                <button class="btn btn-outline" onclick="prevStep(3)">Edit</button>
                <button class="btn btn-primary" onclick="publishProduct()">Publish Product</button>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'https://xoqyywycygofgbgazrpu.supabase.co/rest/v1';
        const API_KEY = 'sb_publishable_O-6kGt2-CDzg7uR8hQoK_w_ZD5M1aUo';

        // Step navigation
        let currentStep = 1;

        function nextStep(step) {
            // Hide current step
            document.getElementById(`step${currentStep}-content`).style.display = 'none';
            document.getElementById(`step${currentStep}`).classList.remove('active');
            
            // Show next step
            document.getElementById(`step${step}-content`).style.display = 'block';
            document.getElementById(`step${step}`).classList.add('active');
            
            // Mark previous step as completed
            document.getElementById(`step${currentStep}`).classList.add('completed');
            
            currentStep = step;
            
            // Update preview if moving to step 4
            if (step === 4) {
                updatePreview();
            }
        }

        function prevStep(step) {
            // Hide current step
            document.getElementById(`step${currentStep}-content`).style.display = 'none';
            document.getElementById(`step${currentStep}`).classList.remove('active');
            
            // Show previous step
            document.getElementById(`step${step}-content`).style.display = 'block';
            document.getElementById(`step${step}`).classList.add('active');
            
            currentStep = step;
        }

        function updatePreview() {
            // Update preview with entered values
            document.getElementById('previewTitle').textContent = 
                document.getElementById('productTitle').value || 'Hand-woven Basket Set';
            document.getElementById('previewCategory').textContent = 
                document.getElementById('productCategory').value || 'Basketry';
            document.getElementById('previewPrice').textContent = 
                '$' + (document.getElementById('productPrice').value || '85');
            document.getElementById('previewDescription').textContent = 
                document.getElementById('productDescription').value || 'Beautiful natural fiber baskets woven by hand...';
        }

        // Handle image upload
        async function handleImageUpload(event) {
            const files = event.target.files;
            const previewGrid = document.getElementById('imagePreview');
            const uploadStatus = document.getElementById('uploadStatus');
            
            if (files.length === 0) return;
            
            // Show loading state
            uploadStatus.innerHTML = 'Uploading... üì∏';
            uploadStatus.style.color = 'var(--primary)';
            
            // Simulate upload (in production, upload to server)
            setTimeout(() => {
                // Clear previous previews
                previewGrid.innerHTML = '';
                
                // Show preview for each image
                for (let i = 0; i < Math.min(files.length, 3); i++) {
                    const file = files[i];
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        img.className = 'preview-image';
                        img.alt = 'Preview';
                        previewGrid.appendChild(img);
                    };
                    
                    reader.readAsDataURL(file);
                }
                
                // Show success message
                uploadStatus.innerHTML = `‚úÖ ${files.length} image(s) uploaded successfully!`;
                uploadStatus.style.color = 'green';
                
                if (files.length > 3) {
                    uploadStatus.innerHTML += ' (Only first 3 shown)';
                }
            }, 1500);
        }

        // Publish product
        async function publishProduct() {
            const productData = {
                artisan_id: 1,
                title: document.getElementById('productTitle').value || 'Hand-woven Basket Set',
                category: document.getElementById('productCategory').value || 'Basketry',
                price: parseFloat(document.getElementById('productPrice').value) || 85,
                description: document.getElementById('productDescription').value || 'Beautiful handcrafted product',
                quantity: document.querySelector('#step3-content input[type="number"]').value || 10,
                processing_time: document.querySelector('#step3-content select').value || '3-5 business days'
            };
            
            // Show loading
            const publishBtn = event.target;
            publishBtn.textContent = 'Publishing...';
            publishBtn.disabled = true;
            
            try {
                // In production, you'd call your API here
                // const response = await fetchAPI('/products', { method: 'POST', body: JSON.stringify(productData) });
                
                // For demo, simulate success
                setTimeout(() => {
                    alert('‚úÖ Product published successfully!');
                    window.location.href = 'index.html';
                }, 1500);
                
            } catch (error) {
                alert('Error publishing product. Please try again.');
                publishBtn.textContent = 'Publish Product';
                publishBtn.disabled = false;
            }
        }

        // Toggle mobile menu
        function toggleMenu() {
            document.getElementById('navLinks').classList.toggle('active');
        }
    </script>
</body>
</html>
        